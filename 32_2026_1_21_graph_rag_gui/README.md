# 🕸️ GraphRAG Visual Editor

**GraphRAG Visual Editor** は、**Streamlit** で構築された「Human-in-the-loop（人間介入型）」な RAG 構築ツールです。

エンジニアでなくとも、GUI上で直感的にナレッジグラフ（ノードとエッジ）を作成し、その構造化された知識に基づいて即座に RAG（GraphRAG）による質問応答を行うことができます。

「AIが自動生成したグラフが正しいか分からない」「重要な知識が欠落している」といった課題に対し、**人の手によるキュレーション（編集・修正）** を導入することで解決を目指したプロトタイプです。

![image](image.png)

## ✨ 特徴

* **📝 ノーコードでのグラフ構築**: コードを書かずに、GUI操作だけでノード（要素）とエッジ（関係性）を追加・編集できます。
* **🖱️ クリック接続 UI**: ドラッグ＆ドロップではなく「始点をクリック」→「終点をクリック」という2ステップ方式を採用し、誤操作の少ない確実な接続を実現しました。
* **🔍 Graph RAG Chat**: 作成したグラフを知識源として、LLM（GPT-4o-mini）とチャットが可能です。
* **🧠 サブグラフ検索 (Subgraph Retrieval)**: 質問に関連するノードとその周辺（1ホップ）の情報のみを動的に抽出し、LLMに渡すことで、高精度かつ低コストな回答生成を行います。
* **⚙️ 堅牢なエラーハンドリング**: NetworkX のバージョン差異によるキー名の違いや、LangChain の変数競合エラーを自動的に吸収・回避します。

## 🛠️ 技術スタック

* **[Streamlit](https://streamlit.io/)**: フロントエンドおよびアプリケーションロジック
* **[Streamlit Agraph](https://github.com/ChrisDelClea/streamlit-agraph)**: インタラクティブなグラフ可視化
* **[NetworkX](https://networkx.org/)**: グラフデータ構造の管理
* **[LangChain](https://www.langchain.com/)**: LLMワークフローの構築
* **[OpenAI API](https://openai.com/)**: 推論モデル (GPT-4o-mini)

## 🚀 インストール手順

### 前提条件

* Python 3.9 以上
* OpenAI API Key

### 手順

1. **リポジトリのクローン**
```bash
git clone https://github.com/LoNebula/32_2026_1_21_graph_rag_gui.git
cd 32_2026_1_21_graph_rag_gui

```


2. **依存ライブラリのインストール**
```bash
pip install streamlit streamlit-agraph networkx langchain-openai langchain-core

```


3. **アプリケーションの起動**
```bash
streamlit run app.py

```


4. **ブラウザで開く**
自動的にブラウザが立ち上がらない場合は、`http://localhost:8501` にアクセスしてください。

## 📖 使い方

サイドバーからページを切り替えて使用します。

### 📝 1. Graph Editor（グラフ作成）

ナレッジベースを構築する画面です。

1. **ノードの追加**:
* サイドバーに名称（例: "ルミナイ", "エンジニア"）を入力し、`➕ ノードを追加` をクリックします。


2. **ノードの接続**:
* グラフ上のノードをクリックします。
* 右パネルの **「始点に設定」** をクリックします（青色になります）。
* 別のノードをクリックします。
* 右パネルの **「終点に設定」** をクリックします（緑色になります）。
* 関係名（例: "所属", "好き"）を入力し、**「🔗 接続する」** をクリックします。



### 🔍 2. RAG Search（チャット検索）

構築したグラフを使って質問する画面です。

1. 入力欄に **OpenAI API Key** を入力します。
2. チャット欄に質問を入力します（例: *"ルミナイとは何ですか？"*）。
3. AIはグラフ内の関連情報を検索し、**グラフにある事実のみ** に基づいて回答します。
* *※グラフに関連情報がない場合、「グラフからは分かりません」と回答するように制御されています。*



## 📂 ファイル構成

```
.
├── app.py           # メインアプリケーションコード
└── README.md        # 本ファイル

```
